RewriteEngine On

# Content negotiation para conceitos
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml [NC]
RewriteRule ^concept/(.*)$ /knowledge-graph.ttl [R=303,L]

RewriteCond %{HTTP_ACCEPT} text/turtle [NC]
RewriteRule ^concept/(.*)$ /knowledge-graph.ttl [R=303,L]

# Content negotiation para inst√¢ncias
RewriteCond %{HTTP_ACCEPT} application/rdf\+xml [NC]
RewriteRule ^instance/(.*)$ /knowledge-graph.ttl [R=303,L]

RewriteCond %{HTTP_ACCEPT} text/turtle [NC]
RewriteRule ^instance/(.*)$ /knowledge-graph.ttl [R=303,L]

# Headers para CORS e Linked Data
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, OPTIONS"
Header set Access-Control-Allow-Headers "Accept, Content-Type"

# Cache para arquivos RDF
<FilesMatch "\.(ttl|rdf|n3|nt)$">
    Header set Cache-Control "public, max-age=3600"
    Header set Content-Type "text/turtle; charset=utf-8"
</FilesMatch>
